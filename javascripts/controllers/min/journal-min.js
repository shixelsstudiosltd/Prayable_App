sampleApp.controller("journal",function(a,n,e,t){n.back=function(a){history.back(),n.$apply()},n.isLogged=!0,n.isJournal=!1,n.showSearch=!1,n.error="";var o=JSON.parse(sessionStorage.getItem("userData"));if(o&&Object.keys(o).length>0){var s=new Date,l=parseInt(s.getFullYear());n.year=[];for(var c=0;5>c;c++)n.year.push(l++);n.journalData={userID:o._id,day:"1",month:"January",year:s.getFullYear(),fileData:[]},n.journalList="",t({method:"POST",url:"http://prayable-21641.onmodulus.net/allJournal",data:{userID:o._id},crossDomain:!0,dataType:"json"}).success(function(a,e){a.length>0?(n.journalList=a,scope.isLogged=!0,scope.showSearch=!0,n.isJournal=!0):(n.isJournal=!1,scope.showSearch=!1)}).error(function(a,e){n.isJournal=!1,console.log(e)}),n.saveJournal=function(){n.journalData.text?n.journalData.title?(n.journalData.tag&&(n.journalData.tag=n.journalData.tag.split(",")),t({method:"POST",url:"http://prayable-21641.onmodulus.net/createJournal",data:{journalData:n.journalData},crossDomain:!0,dataType:"json"}).success(function(a,n){console.log(a)}).error(function(a,n){console.log(n)})):n.error="Please Add Title for the Journal":n.error="Please Add Text for the Journal"};var r=function(a){var n=new FileReader;return n.onloadend=function(){a.journalData.fileData.push(n.result)},n};n.saveImage=function(a){if(a)for(var e=0;e<a.files.length;e++){var t=!!{png:1,gif:1,jpg:1,jpeg:1}[a.files[e].getExtension()];if(1==t){var o=r(n),s=a.files[e].file;o.readAsDataURL(s),n.$apply()}else a.cancel()}},n.deletePic=function(a,n){a.files.splice(n,1)}}else e.path("/"),n.$$phase||n.$apply();n.go=function(a){e.path(a)},$(".journal-toggle > div").click(function(){$(".journal-toggle > div").removeClass("active"),$(this).addClass("active")}),$(".journal-list").click(function(){$(".journals-main-container").css("display","block"),$(".journals-create-main-container").css("display","none")}),$(".journal-create").click(function(){$(".journals-main-container").css("display","none"),$(".journals-create-main-container").css("display","block")}),$(".create-text").click(function(){$(".text-content").css("display","block"),$(".photo-content").css("display","none"),$(".tag-content").css("display","none"),$(".text-content-text-add").css("display","block")}),$(".create-photo").click(function(){$(".text-content").css("display","none"),$(".photo-content").css("display","block"),$(".tag-content").css("display","none"),$(".text-content-text-add").css("display","none")}),$(".create-tag").click(function(){$(".text-content").css("display","none"),$(".photo-content").css("display","none"),$(".tag-content").css("display","block"),$(".text-content-text-add").css("display","none")})});