!function(e,o,n){"use strict";var a=o.module("ngDialog",[]),i=o.element,t=o.isDefined,l=(document.body||document.documentElement).style,s=t(l.animation)||t(l.WebkitAnimation)||t(l.MozAnimation)||t(l.MsAnimation)||t(l.OAnimation),d="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",c=!1;a.provider("ngDialog",function(){var n=this.defaults={className:"ngdialog-theme-default",plain:!1,showClose:!0,closeByDocument:!0,closeByEscape:!0,appendTo:!1};this.setForceBodyReload=function(e){c=e||!1};var a=0,t=0,l,r={};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window",function(c,g,p,u,m,f,D,v){var y=c.find("body");n.forceBodyReload&&f.$on("$locationChangeSuccess",function(){y=c.find("body")});var h={onDocumentKeydown:function(e){27===e.keyCode&&C.close()},setBodyPadding:function(e){var o=parseInt(y.css("padding-right")||0,10);y.css("padding-right",o+e+"px"),y.data("ng-dialog-original-padding",o)},resetBodyPadding:function(){var e=y.data("ng-dialog-original-padding");e?y.css("padding-right",e+"px"):y.css("padding-right","")},closeDialog:function(o){var n=o.attr("id");"undefined"!=typeof e.Hammer?e.Hammer(o[0]).off("tap",l):o.unbind("click"),1===t&&y.unbind("keydown"),o.hasClass("ngdialog-closing")||(t-=1),s?o.unbind(d).bind(d,function(){o.scope().$destroy(),o.remove(),0===t&&(y.removeClass("ngdialog-open"),h.resetBodyPadding())}).addClass("ngdialog-closing"):(o.scope().$destroy(),o.remove(),0===t&&(y.removeClass("ngdialog-open"),h.resetBodyPadding())),r[n]&&(r[n].resolve({id:n,$dialog:o,remainingDialogs:t}),delete r[n]),f.$broadcast("ngDialog.closed",o)}},C={open:function(s){function d(e){return e?o.isString(e)&&w.plain?e:g.get(e)||m.get(e,{cache:!0}):"Empty template"}var c=this,w=o.copy(n);s=s||{},o.extend(w,s),a+=1,c.latestID="ngdialog"+a;var B;r[c.latestID]=B=u.defer();var S=o.isObject(w.scope)?w.scope.$new():f.$new(),b,E;return u.when(d(w.template)).then(function(n){return n=o.isString(n)?n:n.data&&o.isString(n.data)?n.data:"",g.put(w.template,n),w.showClose,c.$result=b=i('<div id="ngdialog'+a+'" class="ngdialog"></div>'),b.html('<div class="ngdialog-overlay"></div><div class="ngdialog-content">'+n+"</div>"),w.controller&&o.isString(w.controller)&&b.attr("ng-controller",w.controller),w.className&&b.addClass(w.className),w.data&&o.isString(w.data)&&(S.ngDialogData="{"===w.data.replace(/^\s*/,"")[0]?o.fromJson(w.data):w.data),E=w.appendTo&&o.isString(w.appendTo)?o.element(document.querySelector(w.appendTo)):y,S.closeThisDialog=function(){h.closeDialog(b)},D(function(){p(b)(S);var e=v.innerWidth-y.prop("clientWidth");y.addClass("ngdialog-open");var o=e-(v.innerWidth-y.prop("clientWidth"));o>0&&h.setBodyPadding(o),E.append(b),f.$broadcast("ngDialog.opened",b)}),w.closeByEscape&&y.bind("keydown",h.onDocumentKeydown),l=function(e){var o=w.closeByDocument?i(e.target).hasClass("ngdialog-overlay"):!1,n=i(e.target).hasClass("ngdialog-close");(o||n)&&C.close(b.attr("id"))},"undefined"!=typeof e.Hammer?e.Hammer(b[0]).on("tap",l):b.bind("click",l),t+=1,C}),{id:"ngdialog"+a,closePromise:B.promise,close:function(){h.closeDialog(b)}}},openConfirm:function(e){var n=u.defer(),a={closeByEscape:!1,closeByDocument:!1};o.extend(a,e),a.scope=o.isObject(a.scope)?a.scope.$new():f.$new(),a.scope.confirm=function(e){n.resolve(e),i.close()};var i=C.open(a);return i.closePromise.then(function(){n.reject()}),n.promise},close:function(e){var o=i(document.getElementById(e));return o.length?h.closeDialog(o):C.closeAll(),C},closeAll:function(){var e=document.querySelectorAll(".ngdialog");o.forEach(e,function(e){h.closeDialog(i(e))})}};return C}]}),a.directive("ngDialog",["ngDialog",function(e){return{restrict:"A",scope:{ngDialogScope:"="},link:function(n,a,i){a.on("click",function(a){a.preventDefault();var t=o.isDefined(n.ngDialogScope)?n.ngDialogScope:"noScope";o.isDefined(i.ngDialogClosePrevious)&&e.close(i.ngDialogClosePrevious),e.open({template:i.ngDialog,className:i.ngDialogClass,controller:i.ngDialogController,scope:t,data:i.ngDialogData,showClose:"false"===i.ngDialogShowClose?!1:!0,closeByDocument:"false"===i.ngDialogCloseByDocument?!1:!0,closeByEscape:"false"===i.ngDialogCloseByEscape?!1:!0})})}}}])}(window,window.angular);